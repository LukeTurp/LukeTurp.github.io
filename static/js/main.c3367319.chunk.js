(this["webpackJsonpteconnect-pay-poc"]=this["webpackJsonpteconnect-pay-poc"]||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(7),o=n.n(r),s=n(3),p=n(8),c=n(1),l=n.n(c),u=n(4),d=n(5);function h(e){var t={displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:"11.00"},{label:"Tax",type:"TAX",price:"1.00"}],countryCode:"US",currencyCode:"USD",totalPriceStatus:"FINAL",totalPrice:"12.00",totalPriceLabel:"Total"},n={"shipping-001":"0.00","shipping-002":"1.99","shipping-003":"10.00"}[e];t.displayItems.push({type:"LINE_ITEM",label:"Shipping cost",price:n,status:"FINAL"});var i=0;return t.displayItems.forEach((function(e){return i+=parseFloat(e.price)})),t.totalPrice=i.toString(),t}var g={apiVersion:2,apiVersionMinor:0,allowedCardNetworks:["AMEX","DISCOVER","JCB","MASTERCARD","MIR","VISA"],merchantName:"TEConnect Test",gatewayId:"GP21481460",transactionInfo:{displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:"11.00"},{label:"Tax",type:"TAX",price:"1.00"}],countryCode:"US",currencyCode:"USD",totalPriceStatus:"FINAL",totalPrice:"12.00",totalPriceLabel:"Total"},callbackIntents:["SHIPPING_ADDRESS","SHIPPING_OPTION","PAYMENT_AUTHORIZATION"],emailRequired:!0,shippingAddressRequired:!0,shippingOptionRequired:!0,shippingAddressParameters:{allowedCountryCodes:["US"],phoneNumberRequired:!0},shippingOptionParameters:{defaultSelectedOptionId:"shipping-001",shippingOptions:[{id:"shipping-001",label:"$0.00: Free shipping",description:"Free Shipping delivered in 5 business days."},{id:"shipping-002",label:"$1.99: Standard shipping",description:"Standard shipping delivered in 3 business days."},{id:"shipping-003",label:"$1000: Express shipping",description:"Express shipping delivered in 1 business day."}]},paymentDataCallbacks:{onPaymentAuthorized:function(e){return new Promise((function(t,n){(function(e){return new Promise((function(t,n){setTimeout((function(){console.log(e),console.log(e.paymentMethodData.tokenizationData.token),t({})}),3e3)}))})(e).then((function(){t({transactionState:"SUCCESS"})})).catch((function(){t({transactionState:"ERROR",error:{intent:"PAYMENT_AUTHORIZATION",message:"Insufficient funds",reason:"PAYMENT_DATA_INVALID"}})}))}))},onPaymentDataChanged:function(e){return new Promise((function(t,n){var i=e.shippingAddress,a=e.shippingOptionData,r={};if("INITIALIZE"==e.callbackTrigger||"SHIPPING_ADDRESS"==e.callbackTrigger)if("NJ"==i.administrativeArea)r.error={reason:"SHIPPING_ADDRESS_UNSERVICEABLE",message:"Cannot ship to the selected address",intent:"SHIPPING_ADDRESS"};else{r.newShippingOptionParameters={defaultSelectedOptionId:"shipping-001",shippingOptions:[{id:"shipping-001",label:"Free: Standard shipping",description:"Free Shipping delivered in 5 business days."},{id:"shipping-002",label:"$1.99: Standard shipping",description:"Standard shipping delivered in 3 business days."},{id:"shipping-003",label:"$10: Express shipping",description:"Express shipping delivered in 1 business day."}]};var o=r.newShippingOptionParameters.defaultSelectedOptionId;r.newTransactionInfo=h(o)}else"SHIPPING_OPTION"==e.callbackTrigger&&(r.newTransactionInfo=h(a.id));t(r)}))}},existingPaymentMethodRequired:!0,allowedPaymentMethods:{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["AMEX","DISCOVER","JCB","MASTERCARD","VISA"]}},environment:"TEST"},S=n(0),m={base:{wrapper:{margin:0,padding:0},variants:{inputType:"outlined",inputMargin:"dense",autoMinHeight:!0},backgroundColor:"#424242"},boxes:{labelColor:"#BB86FC",textColor:"#BB86FC",borderRadius:10,errorColor:"#CF6679",inputColor:"#121212"}},b={storeDisplayName:"TEConnect Dev Store",currencyCode:"USD",countryCode:"US",supportedNetworks:["visa","masterCard","amex","discover","jcb"],merchantCapabilities:["supports3DS"],total:{label:"Test Transaction",amount:"1.00",type:"final"},shippingType:["shipping"],shippingMethods:[{label:"Free Shipping",detail:"Arrives in a week",amount:"0.00",identifier:"FreeShipping"},{label:"Not Free Shipping",detail:"Arrives in less than week",amount:"0.11",identifier:"ChargeShipping"}],requiredShippingContactFields:["name","email","phone","postalAddress"],requiredBillingContactFields:["name","email","phone"],shippingContact:{phoneNumber:"888-8888",emailAddress:"something@example.ne",givenName:"Bob",familyName:"Kahuna",addressLines:["123 Main St.","Suite 101"],locality:"Los Angeles",administrativeArea:"CA",postalCode:"90010",country:"United States",countryCode:"US"},billingContact:{emailAddress:"something@example.ne",givenName:"Bob",familyName:"Kahuna",addressLines:["123 Main St.","Suite 101"],subLocality:"Los Angeles",locality:"CA",postalCode:"90010",country:"United States",countryCode:"US"}},f=function(){var e=Object(i.useState)((function(){return!1})),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(""),o=Object(d.a)(r,2),p=o[0],c=o[1],h=Object(i.useState)(""),f=Object(d.a)(h,2),y=f[0],T=f[1],C=Object(s.useTeConnect)(),O=C.createPayment,E=C.getCurrentElements,P=Object(s.useTecPaymentsRequest)();Object(i.useEffect)((function(){if(P){var e=P({applePay:b,googlePay:g});console.log(e),e.canMakePayments().then((function(t){console.log("canMakePayments Result: ",t),T(JSON.stringify(t)),t?a(e):c("Apple Pay not available")})),e.listenFor("confirm-token",function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CUSTOMER TEC COMPLETE EVENT]: "),console.log(t),n=JSON.stringify(t.tokenDetails,null,"\t"),console.log(n),c(n),t&&t.tokenDetails&&"applePay"===t.tokenDetails.type&&t.completePayment("success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.listenFor("cancel-transaction",function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CUSTOMER TEC CANCEL EVENT]: "),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.listenFor("shipping-method-update",function(){var e=Object(u.a)(l.a.mark((function e(t){var n,i,a,r,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CUSTOMER TEC SHIPPING UPDATE EVENT]: "),console.log(t),n=t.shippingMethod,i=t.completeShippingMethodSelection,a={newTotal:{label:"Test Trx with Not Free Shipping",amount:"1.11",type:"final"}},r={newTotal:{label:"Test Trx w/ Free Shipping",amount:"1.00",type:"final"}},o={newTotal:{label:"Test Trx w/ Out of Scope Shipping",amount:"1.23",type:"final"}},e.t0=n.identifier,e.next="OutOfCountryShip"===e.t0?9:"ChargeShipping"===e.t0?11:13;break;case 9:return s=o,e.abrupt("break",14);case 11:return s=a,e.abrupt("break",14);case 13:s=r;case 14:i(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.listenFor("payment-method-selection",function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CUSTOMER TEC PAYMENT METHOD EVENT]:"),t.paymentMethod,n=t.completePaymentMethodSelection,console.log("paymentMethod: ",t),n({newTotal:{label:"Test Trx with payment method",amount:"1.01",type:"final"}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.listenFor("shipping-contact-update",function(){var e=Object(u.a)(l.a.mark((function e(t){var n,i,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CUSTOMER SHIPPING CONTACT EVENT]:"),console.log("shippingContactEvent: ",t),n=t.shippingContact,i=t.completeShippingContactSelection,a={newTotal:{label:"Test Trx positive shippingContact",amount:"1.02",type:"final"},newShippingMethods:[{label:"Outside US Shipping",detail:"Arrives in 7-12 weeks",amount:"100.00",identifier:"OutOfCountryShip"},{label:"Not Free Shipping",detail:"Arrives in less than week",amount:"0.11",identifier:"ChargeShipping"}]},r={newTotal:{label:"Test Trx negative shippingContact",amount:"1.03",type:"final"},errors:[{errorType:"failure",message:"Generic Error Message for an unkown error"}]},console.log("[".concat(n.countryCode,"]")),i("US"===n.countryCode?a:r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[P,c]);var v=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=E(),e.next=4,O(n);case 4:i=e.sent,console.log("result:",i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{style:{height:"100%"},children:[Object(S.jsx)("h1",{children:"TEC Demo"}),Object(S.jsx)(s.CardEntry,{stylesConfig:m}),n&&Object(S.jsx)(s.TecPaymentRequestButtons,{paymentRequestInterface:n}),Object(S.jsx)("button",{onClick:v,children:"Create Token"}),p&&Object(S.jsxs)("div",{style:{height:"100%",padding:"3rem",margin:"3rem",minWidth:"70%",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:[Object(S.jsx)("h3",{children:"Payment Request Results:"}),p]}),y&&Object(S.jsxs)("div",{style:{height:"100%",padding:"3rem",margin:"3rem",minWidth:"70%",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:[Object(S.jsx)("h3",{children:"CanMakePaymentsResult:"}),y]})]})},y=Object(p.createTEConnect)("Y2xpZW50VG9rZW5Qb2NDb2RlL2NsaWVudFRva2VuUG9jVXNlcjpQYXNzd29yZDEh",{tecPaymentRequest:{appleMerchantId:"AP00000001",googleMerchantId:"BCR2DN4T4CU2XKIQ"}}),T=function(){return Object(S.jsx)(s.TEConnect,{teConnect:y,children:Object(S.jsx)(f,{})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),r(e),o(e)}))};o.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(T,{})}),document.getElementById("root")),C()}},[[15,1,2]]]);
//# sourceMappingURL=main.c3367319.chunk.js.map